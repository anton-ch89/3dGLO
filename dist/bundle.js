(()=>{"use strict";const e=function(){var e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),n=document.querySelectorAll(".popup-btn");e.style.display="block",e.style.left="-".concat(e.clientWidth,"px"),t.style.left="-".concat(t.clientWidth,"px");var o=0,r=function n(){o+=40;var r=requestAnimationFrame(n),c=document.documentElement.clientWidth;o<=c/2&&c>768?(e.style.left="0px",t.style.left=o-t.clientWidth/2+50+"px"):(e.style.left="0px",t.style.left=c/2-t.clientWidth/2+50+"px",cancelAnimationFrame(r))},c=function n(){o-=15;var r=requestAnimationFrame(n),c=document.documentElement.clientWidth;o>=-t.clientWidth/2&&c>768?(t.style.left=o-t.clientWidth/2+50+"px",e.style.left="-".concat(e.clientWidth,"px")):(t.style.left="-".concat(t.clientWidth,"px"),e.style.left="-".concat(e.clientWidth,"px"),cancelAnimationFrame(r))};n.forEach((function(t){t.addEventListener("click",(function(){r()})),e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?c():(t=t.closest(".popup-content"))||c()}))}))};var t,n,o,r,c,a,i,l,u,s,d,m,f,v,p,h,y,g,E,q;y=document.querySelector("#timer-hours"),g=document.querySelector("#timer-minutes"),E=document.querySelector("#timer-seconds"),q=setInterval((function(){var e,t,n,o,r=(e=(new Date("28 june 2021 10:08:30").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),(o=Math.floor(e/60/60))<0&&n<0&&t<0&&(t="00",n="00",o="00"),(o<10||n<10||t<10)&&(t=("0"+t).slice(-2),n=("0"+n).slice(-2),o=("0"+o).slice(-2)),{timeRemaining:e,hours:o,minutes:n,seconds:t});r.timeRemaining>0?(y.textContent=r.hours,g.textContent=r.minutes,E.textContent=r.seconds):clearInterval(q)}),1e3),f=document.querySelector("menu"),v=document.querySelector("body"),p=0,h=function e(){p+=40;var t=requestAnimationFrame(e),n=document.documentElement.clientWidth;p<=n&&n>768?f.style.left=p+"px":(f.style.left=n+"px",cancelAnimationFrame(t))},v.addEventListener("click",(function(e){var t=e.target;t.classList.contains("close-btn")||t.closest("ul>li>a")?(e.preventDefault(),f.style.left="-".concat(f.clientWidth,"px"),p=0):t.closest(".menu")?h():(t=t.closest("menu"))||(f.style.left="-".concat(f.clientWidth,"px"),p=0)})),e(),s=document.querySelectorAll("ul>li>a"),d=document.querySelector("main>a"),m=function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth"})}))},s.forEach((function(e){m(e)})),m(d),i=document.querySelector(".service-header"),l=i.querySelectorAll(".service-header-tab"),u=document.querySelectorAll(".service-tab"),i.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&l.forEach((function(e,n){e===t&&function(e){for(var t=0;t<u.length;t++)e===t?(l[t].classList.add("active"),u[t].classList.remove("d-none")):(l[t].classList.remove("active"),u[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content")),n=document.querySelector(".portfolio-dots");!function(){n.insertAdjacentHTML("afterbegin",'<li class="dot dot-active"></li>');for(var t=0;t<e.length-1;t++)n.insertAdjacentHTML("beforeend",'<li class="dot"></li>')}();var o,r=document.querySelectorAll(".dot"),c=0,a=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},l=function(){a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),++c>=e.length&&(c=0),i(e,c,"portfolio-item-active"),i(r,c,"dot-active")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o=setInterval(l,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&r.forEach((function(e,t){e===n&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),i(e,c,"portfolio-item-active"),i(r,c,"dot-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(3e3)}(),c=document.querySelectorAll(".command__photo"),a=function(e){var t=e.src;e.src=e.dataset.img,e.dataset.img=t},c.forEach((function(e){e.addEventListener("mouseover",(function(){return a(e)})),e.addEventListener("mouseout",(function(){return a(e)}))})),document.querySelectorAll("input.calc-item").forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/\D/g,"")}))})),t=document.querySelectorAll("#form1-name, #form2-name, #form3-name"),n=document.querySelectorAll("#form1-email, #form2-email, #form3-email"),o=document.querySelectorAll("#form1-phone, #form2-phone, #form3-phone"),(r=document.querySelector("#form2-message")).setAttribute("required",!0),t.forEach((function(e){e.addEventListener("input",(function(){e.style.border="",e.value=e.value.replace(/[^а-я\s]/i,""),e.addEventListener("blur",(function(){e.value.length>1?e.value=e.value.replace(/[^а-я\s]/gi,"").replace(/^[ \s]+|[ \s]+$/g,"").replace(/^[-]+|[-]+$/g,"").replace(/\s+/g," ").replace(/-+/g,"-").split(" ").map((function(e){if(e)return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "):(e.style.border="2px solid red",e.value="")}))}))})),n.forEach((function(e){e.setAttribute("required",!0),e.addEventListener("input",(function(){e.value=e.value.trim().replace(/[^a-z@_.!`*-~']|[0-9]/gi,""),e.addEventListener("blur",(function(t){e.type="text",e.value=e.value.replace(/[^a-z@_.!`*-~']|[0-9]/gi,"").replace(/^[ \s]+|[ \s]+$/g,"").replace(/^[-]+|[-]+$/g,"").replace(/\s+/g," ").replace(/-+/g,"-")}))}))})),o.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^0-9\+]/,""),e.addEventListener("blur",(function(){e.value.length>=7&&e.value.length<=11?(e.value=e.value.replace(/[^0-9\+]/g,""),e.style.border=""):(e.style.border="2px solid red",e.value="")}))}))})),r.addEventListener("input",(function(){r.value=r.value.replace(/[^а-я\s-,:;!\?\.0-9]/i,""),r.addEventListener("blur",(function(){r.value=r.value.replace(/[^а-я\s-,:;!\?\.0-9]/gi,"").replace(/^[ \s]+|[ \s]+$/g,"").replace(/^[-]+|[-]+$/g,"").replace(/\s+/g," ").replace(/-+/g,"-")}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.querySelector("#total"),i=function(){var t=0,i=1,l=1,u=0,s=n.value,d=+o.value;c.value>1&&(i+=(+c.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),s&&d&&(t=Math.round(e*s*d*i*l)),s&&d?function e(){var n=requestAnimationFrame(e);u<t?(u+=50,a.textContent=u):cancelAnimationFrame(n)}():a.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("input")||t.matches("select"))&&i()}))}(100),function(){var t="Что-то пошло не так",n="Загрузка...",o="Спасибо! Мы скоро с Вами свяжемся",r=document.querySelector("#form1"),c=document.querySelector("#form2"),a=document.querySelector("#form3"),i=document.createElement("div");i.style.cssText="font-size: 2rem;",r.addEventListener("submit",(function(e){e.preventDefault(),r.append(i),i.textContent=n;var c=new FormData(r),a={};c.forEach((function(e,t){a[t]=e})),l(a).then((function(e){if(200!==e.status)throw new Error("status network is not 200");i.textContent=o,setTimeout((function(){i.remove()}),3e3)})).catch((function(e){i.textContent=t,setTimeout((function(){i.remove()}),3e3),console.error(e)})),r.reset()})),c.addEventListener("submit",(function(e){e.preventDefault(),c.insertAdjacentElement("afterend",i),i.textContent=n;var r=new FormData(c),a={};r.forEach((function(e,t){a[t]=e})),l(a).then((function(e){if(200!==e.status)throw new Error("status network is not 200");i.textContent=o,setTimeout((function(){i.remove()}),3e3)})).catch((function(e){i.textContent=t,setTimeout((function(){i.remove()}),3e3),console.error(e)})),c.reset()})),a.addEventListener("submit",(function(r){r.preventDefault(),i.style.cssText="font-size: 2rem; color: #fff;",a.insertAdjacentElement("afterend",i),i.textContent=n;var c=new FormData(a),u={};c.forEach((function(e,t){u[t]=e})),l(u).then((function(t){if(200!==t.status)throw new Error("status network is not 200");i.textContent=o,setTimeout((function(){i.remove(),e()}),2e3)})).catch((function(n){i.textContent=t,setTimeout((function(){i.remove(),e()}),3e3),console.error(n)})),a.reset()}));var l=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}()})();